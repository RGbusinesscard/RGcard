<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Commander — RG.card</title>
  <meta name="description" content="Commander vos cartes NFC RG.card : personnalisations, logo, gravure, quantité. Paiement en ligne (intégration Stripe/Apple Pay à prévoir)." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0d10;--panel:#0f1318cc;--text:#e8edf2;--muted:#a7b1bd;--accent:#93c5fd;--cta:#0ea5e9;--shadow:0 10px 30px rgba(0,0,0,.35);--radius:18px;--maxw:960px
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 800px at 10% -10%, #1b2330 0%, transparent 60%),radial-gradient(1000px 700px at 110% 10%, #0d3b66 0%, transparent 60%),linear-gradient(180deg,#0b0d10 0%, #0b0d10 100%);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--maxw);margin-inline:auto;padding:0 20px}
    header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.2) blur(10px);background:linear-gradient(0deg,transparent,rgba(11,13,16,.55));border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:32px;height:32px;border-radius:10px;border:1px solid rgba(255,255,255,.08);display:grid;place-items:center;background:linear-gradient(135deg,#2b3340,#11161d)}
    main{padding:48px 0}
    h1{font-size:clamp(26px,4.4vw,42px);margin:0 0 8px}
    .muted{color:var(--muted)}
    .panel{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    .grid{display:grid;gap:18px}
    @media(min-width:900px){.grid{grid-template-columns:1.2fr .8fr}}
    label{display:block;font-weight:600;margin:12px 0 6px}
    input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:#0c1117;color:var(--text)}
    input[type="file"]{padding:10px;background:#0c1117;border:1px dashed rgba(255,255,255,.22)}
    .row{display:grid;gap:12px}
    @media(min-width:720px){.row{grid-template-columns:1fr 1fr}}
    .options{display:grid;gap:12px;margin:10px 0}
    .inline{display:flex;gap:10px;align-items:center}
    .price-box{position:sticky;top:90px}
    .total{font-size:32px;font-weight:800}
    .cta{display:inline-flex;justify-content:center;align-items:center;gap:10px;padding:12px 18px;border-radius:999px;font-weight:700;background:linear-gradient(180deg,var(--cta),#0c8ecf);color:#031018;border:0;cursor:pointer;box-shadow:0 6px 18px rgba(14,165,233,.35)}
    .ghost{padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}
    .help{font-size:12px;color:#93a6bb}
    .note{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);padding:10px;border-radius:12px;color:#cfe7ff}
    .small{font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo"><span style="font-size:12px">RG</span></div>
        <a href="index.html">RG.card</a>
      </div>
      <nav>
        <a class="ghost" href="index.html#produits">Produits</a>
        <a class="ghost" href="index.html#tarifs">Tarifs</a>
        <a class="ghost" href="index.html#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container">
      <div style="margin-bottom:14px" class="small muted">Accueil ▸ Commander</div>
      <h1>Commander vos cartes NFC</h1>
      <p class="muted">Prix unitaire : <strong>20 €</strong> (hors TVA — micro‑entreprise, TVA non applicable, art. 293 B du CGI). Montant calculé en bas à droite.</p>

      <div class="grid">
        <!-- FORMULAIRE -->
        <form class="panel" id="orderForm" onsubmit="handleSubmit(event)">
          <h2 style="margin-top:0">Personnalisation</h2>
          <div class="row">
            <div>
              <label for="finish">Finition de la carte</label>
              <select id="finish" name="finish" required>
                <option value="mate">Mate</option>
                <option value="brillante">Brillante</option>
              </select>
            </div>
            <div>
              <label for="color">Couleur dominante</label>
              <select id="color" name="color" required>
                <option>Noir</option>
                <option>Anthracite</option>
                <option>Blanc</option>
                <option>Personnalisée</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="quantity">Quantité</label>
              <input id="quantity" name="quantity" type="number" min="1" value="1" required>
              <div class="help">Prix de base : 20 € / carte.</div>
            </div>
            <div>
              <label for="link">Lien à programmer (site, Instagram, Google, vCard…)</label>
              <input id="link" name="link" type="url" placeholder="https://…" required>
            </div>
          </div>

          <div class="options">
            <div class="inline">
              <input id="engrave" name="engrave" type="checkbox" onchange="updateTotal()">
              <label for="engrave" style="margin:0">Ajouter une gravure laser (logo/texte)</label>
            </div>
            <div>
              <label for="logo">Votre logo (SVG/PNG/PDF)</label>
              <input id="logo" name="logo" type="file" accept=".svg,.png,.pdf,.ai,.eps">
              <div class="help">Vectoriel recommandé (SVG/PDF) pour une gravure nette.</div>
            </div>
            <div>
              <label for="notes">Notes pour la mise en page</label>
              <textarea id="notes" name="notes" rows="4" placeholder="Instructions de design, police souhaitée, placement du logo…"></textarea>
            </div>
          </div>

          <h2>Vos coordonnées</h2>
          <div class="row">
            <div>
              <label for="name">Nom complet</label>
              <input id="name" name="name" required>
            </div>
            <div>
              <label for="email">E‑mail</label>
              <input id="email" name="email" type="email" required>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="phone">Téléphone</label>
              <input id="phone" name="phone" type="tel" required>
            </div>
            <div>
              <label for="company">Entreprise (facultatif)</label>
              <input id="company" name="company">
            </div>
          </div>

          <div class="note small">
            Paiement en ligne : Apple Pay / Carte via Stripe possible. <strong>Intégration technique requise</strong> (voir zone Paiement). En attendant, vous pouvez envoyer la commande par e‑mail.
          </div>

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:16px">
            <button class="cta" type="submit">Envoyer la commande</button>
            <a id="mailtoLink" class="ghost" href="#">Envoyer par e‑mail</a>
          </div>
        </form>

        <!-- RECAP / PAIEMENT -->
        <aside class="panel price-box">
          <h2 style="margin-top:0">Récapitulatif</h2>
          <div class="small muted">Prix unitaire de base</div>
          <div style="font-weight:700;margin:4px 0 10px">20 € / carte</div>
          <div class="small muted">Gravure laser</div>
          <div class="small" id="engraveLine">À confirmer (optionnelle)</div>

          <hr style="border:0;border-top:1px solid rgba(255,255,255,.12);margin:14px 0">
          <div class="total" id="total">20 €</div>
          <div class="small muted">TVA non applicable — art. 293 B du CGI</div>

          <div style="margin-top:18px">
            <h3 style="margin:0 0 6px">Paiement</h3>
            <div class="note small" style="margin-bottom:10px">
              Bouton Apple Pay / CB via Stripe Payment Element (à intégrer côté serveur). 
              <div class="help">Je peux fournir le code Stripe quand vous serez prêt.</div>
            </div>
            <button class="cta" type="button" disabled title="Stripe à intégrer"> Pay / Carte bancaire</button>
          </div>

          <div style="margin-top:14px">
            <a class="ghost" href="index.html">← Retour au site</a>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <script>
    const BASE_PRICE = 20;               // € par carte
    const ENGRAVE_PRICE = 0;             // € par carte (définissez le montant; 0 = à confirmer)

    const qtyEl = document.getElementById('quantity');
    const engraveEl = document.getElementById('engrave');
    const totalEl = document.getElementById('total');
    const engraveLine = document.getElementById('engraveLine');
    const mailtoLink = document.getElementById('mailtoLink');
    const form = document.getElementById('orderForm');

    function formatEUR(n){
      return new Intl.NumberFormat('fr-FR', { style:'currency', currency:'EUR', maximumFractionDigits:0 }).format(n)
        .replace(/,00\s€/, ' €');
    }

    function updateTotal(){
      const qty = Math.max(1, parseInt(qtyEl.value || '1', 10));
      const engrave = engraveEl.checked;
      const unit = BASE_PRICE + (engrave ? ENGRAVE_PRICE : 0);
      const total = unit * qty;
      totalEl.textContent = formatEUR(total);
      engraveLine.textContent = engrave ? (ENGRAVE_PRICE>0? ('+'+formatEUR(ENGRAVE_PRICE)+' / carte') : 'Option sélectionnée — prix confirmé au devis') : 'Non sélectionnée';
      buildMailto();
    }

    function buildMailto(){
      const data = new FormData(form);
      const lines = [
        'Nouvelle commande RG.card',
        '',
        `Finition: ${data.get('finish')}`,
        `Couleur: ${data.get('color')}`,
        `Quantité: ${data.get('quantity')}`,
        `Lien NFC: ${data.get('link')}`,
        `Gravure: ${data.get('engrave') ? 'Oui' : 'Non'}`,
        `Notes: ${data.get('notes')||'-'}`,
        '',
        `Nom: ${data.get('name')}`,
        `Email: ${data.get('email')}`,
        `Téléphone: ${data.get('phone')}`,
        `Entreprise: ${data.get('company')||'-'}`,
        '',
        `Total estimé: ${totalEl.textContent} (TVA non applicable — art. 293 B du CGI)`
      ];
      const subject = encodeURIComponent('Commande RG.card');
      const body = encodeURIComponent(lines.join('\n'));
      mailtoLink.href = `mailto:rg.businesscard@gmail.com?subject=${subject}&body=${body}`;
    }

    function handleSubmit(e){
      e.preventDefault();
      updateTotal();
      alert('Merci ! Votre commande est prête à être envoyée. Cliquez sur « Envoyer par e‑mail » pour finaliser, ou activez le paiement Stripe quand vous serez prêt.');
    }

    qtyEl.addEventListener('input', updateTotal);
    engraveEl.addEventListener('change', updateTotal);
    document.addEventListener('DOMContentLoaded', updateTotal);
  </script>
</body>
</html>
